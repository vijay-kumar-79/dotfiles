# █░█░█ █ █▄░█ █▀▄ █▀█ █░█░█   █▀█ █░█ █░░ █▀▀ █▀
# ▀▄▀▄▀ █ █░▀█ █▄▀ █▄█ ▀▄▀▄▀   █▀▄ █▄█ █▄▄ ██▄ ▄█

# See https://wiki.hypr.land/Configuring/Window-Rules/

# idleinhibit rules
windowrule = idle_inhibit fullscreen, match:class ^(.*celluloid.*)$|^(.*mpv.*)$|^(.*vlc.*)$
windowrule = idle_inhibit fullscreen, match:class ^(.*[Ss]potify.*)$
windowrule = idle_inhibit fullscreen, match:class ^(.*LibreWolf.*)$|^(.*floorp.*)$|^(.*brave-browser.*)$|^(.*firefox.*)$|^(.*chromium.*)$|^(.*zen.*)$|^(.*vivaldi.*)$

# Picture-in-Picture
windowrule = tag +picture-in-picture, match:title ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrule = float on, match:tag picture-in-picture
windowrule = keep_aspect_ratio on, match:tag picture-in-picture
windowrule = move 73% 72%, match:tag picture-in-picture
windowrule = size 25%, match:tag picture-in-picture
windowrule = pin on, match:tag picture-in-picture

# Browser opacity
windowrule = opacity 0.90 override 0.90 override 1 override, match:class ^(firefox)$
windowrule = opacity 0.90 override 0.90 override 1 override, match:class ^(brave-browser)$

# Code editors opacity
windowrule = opacity 0.80 override 0.80 override 1 override, match:class ^(code-oss)$
windowrule = opacity 0.80 override 0.80 override 1 override, match:class ^([Cc]ode)$
windowrule = opacity 0.80 override 0.80 override 1 override, match:class ^(code-url-handler)$
windowrule = opacity 0.80 override 0.80 override 1 override, match:class ^(code-insiders-url-handler)$

# Terminal and file managers
windowrule = opacity 0.80 override 0.80 override 1 override, match:class ^(kitty)$
windowrule = opacity 0.80 override 0.80 override 1 override, match:class ^(org.kde.dolphin)$
windowrule = opacity 0.80 override 0.80 override 1 override, match:class ^(org.kde.ark)$

# Theme tools
windowrule = opacity 0.80 override 0.80 override 1 override, match:class ^(nwg-look)$
windowrule = opacity 0.80 override 0.80 override 1 override, match:class ^(qt5ct)$
windowrule = opacity 0.80 override 0.80 override 1 override, match:class ^(qt6ct)$
windowrule = opacity 0.80 override 0.80 override 1 override, match:class ^(kvantummanager)$

# System utilities
windowrule = opacity 0.80 override 0.70 override 1 override, match:class ^(org.pulseaudio.pavucontrol)$
windowrule = opacity 0.80 override 0.70 override 1 override, match:class ^(blueman-manager)$
windowrule = opacity 0.80 override 0.70 override 1 override, match:class ^(nm-applet)$
windowrule = opacity 0.80 override 0.70 override 1 override, match:class ^(nm-connection-editor)$
windowrule = opacity 0.80 override 0.70 override 1 override, match:class ^(org.kde.polkit-kde-authentication-agent-1)$
windowrule = opacity 0.80 override 0.70 override 1 override, match:class ^(polkit-gnome-authentication-agent-1)$
windowrule = opacity 0.80 override 0.70 override 1 override, match:class ^(org.freedesktop.impl.portal.desktop.gtk)$
windowrule = opacity 0.80 override 0.70 override 1 override, match:class ^(org.freedesktop.impl.portal.desktop.hyprland)$

# Gaming
windowrule = opacity 0.70 override 0.70 override 1 override, match:class ^([Ss]team)$
windowrule = opacity 0.70 override 0.70 override 1 override, match:class ^(steamwebhelper)$

# Spotify
windowrule = opacity 0.70 override 0.70 override 1 override, match:class ^([Ss]potify)$
# FIX: match:initialTitle -> match:initial_title
windowrule = opacity 0.70 override 0.70 override 1 override, match:initial_title ^(Spotify Free)$
windowrule = opacity 0.70 override 0.70 override 1 override, match:initial_title ^(Spotify Premium)$

# GTK/Qt applications
windowrule = opacity 0.90 0.90, match:class ^(com.github.rafostar.Clapper)$
windowrule = opacity 0.80 0.80, match:class ^(com.github.tchx84.Flatseal)$
windowrule = opacity 0.80 0.80, match:class ^(hu.kramo.Cartridges)$
windowrule = opacity 0.80 0.80, match:class ^(com.obsproject.Studio)$
windowrule = opacity 0.80 0.80, match:class ^(gnome-boxes)$
windowrule = opacity 0.80 0.80, match:class ^(vesktop)$
windowrule = opacity 0.80 0.80, match:class ^(discord)$
windowrule = opacity 0.80 0.80, match:class ^(WebCord)$
windowrule = opacity 0.80 0.80, match:class ^(ArmCord)$
windowrule = opacity 0.80 0.80, match:class ^(app.drey.Warp)$
windowrule = opacity 0.80 0.80, match:class ^(net.davidotek.pupgui2)$
windowrule = opacity 0.80 0.80, match:class ^(yad)$
windowrule = opacity 0.80 0.80, match:class ^(Signal)$
windowrule = opacity 0.80 0.80, match:class ^(io.github.alainm23.planify)$
windowrule = opacity 0.80 0.80, match:class ^(io.gitlab.theevilskeleton.Upscaler)$
windowrule = opacity 0.80 0.80, match:class ^(com.github.unrud.VideoDownloader)$
windowrule = opacity 0.80 0.80, match:class ^(io.gitlab.adhami3310.Impression)$
windowrule = opacity 0.80 0.80, match:class ^(io.missioncenter.MissionCenter)$
windowrule = opacity 0.80 0.80, match:class ^(io.github.flattool.Warehouse)$

# Float rules
windowrule = float on, match:class ^(Signal)$
windowrule = float on, match:class ^(com.github.rafostar.Clapper)$
windowrule = float on, match:class ^(app.drey.Warp)$
windowrule = float on, match:class ^(net.davidotek.pupgui2)$
windowrule = float on, match:class ^(yad)$
windowrule = float on, match:class ^(eog)$
windowrule = float on, match:class ^(io.github.alainm23.planify)$
windowrule = float on, match:class ^(io.gitlab.theevilskeleton.Upscaler)$
windowrule = float on, match:class ^(com.github.unrud.VideoDownloader)$
windowrule = float on, match:class ^(io.gitlab.adhami3310.Impression)$
windowrule = float on, match:class ^(io.missioncenter.MissionCenter)$

# JetBrains IDE workaround
# FIX: no_initial_focus is valid, just ensure matchers are correct
windowrule = no_initial_focus on, match:class ^(.*jetbrains.*)$ match:title ^(win[0-9]+)$

# █░░ ▄▀█ █▄█ █▀▀ █▀█   █▀█ █░█ █░░ █▀▀ █▀
# █▄▄ █▀█ ░█░ ██▄ █▀▄   █▀▄ █▄█ █▄▄ ██▄ ▄█

# FIX: layerrule syntax updated
layerrule = blur on, match:namespace rofi
layerrule = ignore_alpha 0, match:namespace rofi

layerrule = blur on, match:namespace notifications
layerrule = ignore_alpha 0, match:namespace notifications

layerrule = blur on, match:namespace swaync-notification-window
layerrule = ignore_alpha 0, match:namespace swaync-notification-window

layerrule = blur on, match:namespace swaync-control-center
layerrule = ignore_alpha 0, match:namespace swaync-control-center

layerrule = blur on, match:namespace logout_dialog
layerrule = ignore_alpha 0, match:namespace logout_dialog
